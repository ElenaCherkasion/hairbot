import fs from 'fs';
import path from 'path';

console.log('üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞ HAIRbot\n');

// –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ —Ñ–∞–π–ª–∞–º
const countFiles = (dir) => {
  let count = 0;
  const files = fs.readdirSync(dir);
  
  for (const file of files) {
    const filePath = path.join(dir, file);
    const stat = fs.statSync(filePath);
    
    if (stat.isDirectory()) {
      count += countFiles(filePath);
    } else if (file.endsWith('.js')) {
      count++;
    }
  }
  
  return count;
};

try {
  const jsFiles = countFiles('.');
  console.log(`üìÅ JavaScript —Ñ–∞–π–ª–æ–≤: ${jsFiles}`);
  
  // –†–∞–∑–º–µ—Ä –ø—Ä–æ–µ–∫—Ç–∞
  const getSize = (dir) => {
    let size = 0;
    const files = fs.readdirSync(dir);
    
    for (const file of files) {
      const filePath = path.join(dir, file);
      const stat = fs.statSync(filePath);
      
      if (stat.isDirectory() && !file.includes('node_modules')) {
        size += getSize(filePath);
      } else {
        size += stat.size;
      }
    }
    
    return size;
  };
  
  const sizeMB = (getSize('.') / (1024 * 1024)).toFixed(2);
  console.log(`üíæ –†–∞–∑–º–µ—Ä –ø—Ä–æ–µ–∫—Ç–∞: ${sizeMB} MB`);
  
  console.log('\nüìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞:');
  console.log('- src/handlers/: 5 —Ñ–∞–π–ª–æ–≤');
  console.log('- src/utils/: 6 —Ñ–∞–π–ª–æ–≤');
  console.log('- src/database/: 5 —Ñ–∞–π–ª–æ–≤');
  console.log('- src/services/: 2 —Ñ–∞–π–ª–∞');
  console.log('- src/keyboards/: 4 —Ñ–∞–π–ª–∞');
  console.log('- scripts/: 5 —Ñ–∞–π–ª–æ–≤');
  
  console.log('\nüöÄ –ì–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ!');
  
} catch (error) {
  console.error('‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏:', error.message);
}
